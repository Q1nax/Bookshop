(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var a=t.g.document;if(!e&&a&&(a.currentScript&&"SCRIPT"===a.currentScript.tagName.toUpperCase()&&(e=a.currentScript.src),!e)){var o=a.getElementsByTagName("script");if(o.length)for(var n=o.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=o[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"})();let e=[{url:t.p+"images/banner.jpg"},{url:t.p+"images/banner-2.jpg"},{url:t.p+"images/banner-3.jpg"}];const a="https://www.googleapis.com/books/v1/volumes",o={category:"Architecture",startIndex:0,maxResults:6,langRestrict:"en"},n=t=>{let e=document.querySelector(".categories__item_selected").dataset.category;return o.category=e,!0===t&&(o.startIndex=0),o},r=(t,e,a,n)=>{let r=`${t}?q="subject:${o.category}"&AIzaSyCn02SeAjNpdS15dWxdix9eUhRNCXTDyps&printType=books&startIndex=${o.startIndex}&maxResults=${o.maxResults}&langRestrict=${o.langRestrict}`;fetch(r).then((t=>t.json())).then((t=>{a(t,n)})).catch((t=>console.log(t.message)))},s=t.p+"images/no_photo.png",i=t.p+"images/star-filled.svg",c=t.p+"images/star.svg",l=document.querySelector(".cart-count"),d=(t,e)=>{let a=document.querySelector(".product-list");e&&(a.innerHTML=""),t.items.forEach((t=>{let e=null,o=t.id,n="",r="",l="",d="",u="",g="";if(e=t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.thumbnail:s,t.volumeInfo.authors){let e=t.volumeInfo.authors,a="";e.forEach(((t,e,o)=>{e===o.length-1?a+=`${t}`:a+=`${t}, `})),n=`<p class="product__author" data-book-info="author">${a}</p>`}if(t.volumeInfo.title&&(r=`<h1 class="product__title" data-book-info="title">${t.volumeInfo.title}</h1>`),t.volumeInfo.averageRating){let e=t.volumeInfo.ratingsCount;l=`<div class="product__rating">\n                      <div class="rating__stars">\n                        <img src=${i} alt="Icon" class="star">\n                        <img src=${i} alt="Icon" class="star">\n                        <img src=${i}  alt="Icon" class="star">\n                        <img src=${c}  alt="Icon" class="star">\n                        <img src=${c}  alt="Icon" class="star">\n                      </div>\n                      <span class="review-nums">${e} review</span>\n                    </div>`}if(t.volumeInfo.description&&t.volumeInfo.description.length>90?d=`<p class="product__description" data-book-info="description">${t.volumeInfo.description.slice(0,91)+"..."}</p>`:t.volumeInfo.description&&(d=`<p class="product__description" data-book-info="description">${t.volumeInfo.description}</p>`),t.saleInfo.listPrice){let e=t.saleInfo.listPrice.amount;const a=98;u=`<div class="product__price">\n                    <span class="price__currency">$</span><span class="price__value" data-book-info="price">${Math.floor(100*e/a)/100}</span>\n                  </div>`}g=`<div class="products-list__item product">\n                      <img src="${e}" alt="Book cover" class="product__img" data-book-info="thumbnail">\n                      <div class="product__card">\n                        ${n}\n                        ${r}\n                        ${l}\n                        ${d}\n                        ${u}\n                        <button class="btn buy-button" data-book-info="id" data-bookid="${o}">Buy now</button>\n                      </div>\n                    </div>`,a.insertAdjacentHTML("beforeend",g)})),document.querySelectorAll(".buy-button").forEach((t=>(t=>{if(localStorage.length)for(let e=0;e<localStorage.length;e++)localStorage.key(e)===t.dataset.bookid&&(t.innerHTML="In the cart",t.classList.add("btn_in-cart"))})(t)))};const u=document.querySelector(".btn-load"),g=document.querySelectorAll(".categories__item");let p={titles:!1,dots:!0,autoplay:!0,autoplayInterval:5e3};g.forEach((t=>t.addEventListener("click",(e=>{e.preventDefault(),(t=>{let e=t;document.querySelector(".categories__item_selected").classList.remove("categories__item_selected"),e.classList.add("categories__item_selected")})(t),n(!0),r(a,0,d,!0)})))),u.addEventListener("click",(()=>{n().startIndex+=6,r(a,0,d,!1)})),document.addEventListener("DOMContentLoaded",(function(){var t;(function(t){if(!e||!e.length)return;t=t||{titles:!0,dots:!0,autoplay:!1};let a=document.querySelector(".slider__images"),o=document.querySelector(".slider__dots");function n(n){a.querySelector(".active").classList.remove("active"),a.querySelector(".n"+n).classList.add("active"),t.dots&&(o.querySelector(".active").classList.remove("active"),o.querySelector(".n"+n).classList.add("active")),t.titles&&function(t){e[t].title&&(a.querySelector(".slider__images-title").innerText=e[t].title)}(n)}e.forEach(((t,o)=>{let n=`<div class="image n${o} ${0===o?"active":""}" style="background-image:url(${e[o].url})" data-index="${o}"></div>`;a.innerHTML+=n})),t.dots&&(e.forEach(((t,e)=>{let a=`<div class="slider__dots-item n${e} ${0===e?"active":""}" data-index="${e}"></div>`;o.innerHTML+=a})),o.querySelectorAll(".slider__dots-item").forEach((t=>{t.addEventListener("click",(t=>{n(t.target.dataset.index)}))}))),t.titles&&function(){let t=`<div class="slider__images-title">${e[0].title}</div>`;a.innerHTML+=t}(),t.autoplay&&setInterval((()=>{let t=+a.querySelector(".active").dataset.index;n(t===e.length-1?0:t+1)}),t.autoplayInterval)})(p),t=localStorage.length,localStorage.length&&(l.classList.remove("cart-btn__count_empty"),l.textContent=t),document.querySelector(".product-list").addEventListener("click",(t=>{if(!t.target.classList.contains("buy-button"))return;const e=t.target.parentElement.parentElement,a={id:"",thumbnail:"",author:"",title:"",description:"",price:""};for(let t in a){let o=e.querySelector(`[data-book-info = "${t}"]`);o&&"id"===t?a[t]=o.dataset.bookid:o&&"thumbnail"===t?a[t]=o.getAttribute("src"):o&&(a[t]=o.textContent)}if(t.target.classList.contains("btn_in-cart")){const a=e.querySelector('[data-book-info="id"]').dataset.bookid;localStorage.removeItem(a),o=t.target,n=localStorage.length,o.innerHTML="Buy now",o.classList.remove("btn_in-cart"),0===n&&l.classList.add("cart-btn__count_empty"),l.textContent=n}else localStorage.setItem(a.id,JSON.stringify(a)),((t,e)=>{t.innerHTML="In the cart",t.classList.add("btn_in-cart"),l.classList.remove("cart-btn__count_empty"),l.textContent=e})(t.target,localStorage.length);var o,n})),r(a,0,d,!1)}))})();